{"version":3,"sources":["index.js"],"names":["lightTheme","createTheme","palette","type","primary","main","secondary","error","colors","red","A400","background","default","darkTheme","isSM","window","matchMedia","breakpoints","down","replace","matches","GalleryItem","props","state","item","isVideo","dialogOpen","imageClicked","bind","dialogClose","this","setState","date","Date","takenAt","toLocaleDateString","toLocaleTimeString","size","i","Math","floor","log","pow","toFixed","viewElement","viewElementBig","previewURL","id","fullURL","src","controls","preload","poster","className","alt","href","target","rel","xs","onClick","elevation","fullScreen","open","onClose","download","fileName","color","align","getDateString","game","storedAt","humanFileSize","fileSize","React","Component","App","galleryContent","currentPage","maxPages","currentTheme","stats","numScreenshots","numVideos","indexTime","fetchGallery","fetch","then","res","json","result","gallery","pages","theme","e","page","style","flexGrow","padding","variant","paddingBottom","fontWeight","toPrecision","container","spacing","justifyContent","map","value","length","paddingTop","count","onChange","onPageChange","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.b80ee19d.chunk.js","sourcesContent":["/*\r\n    NXGallery for Nintendo Switch\r\n    Made with love by Jonathan Verbeek (jverbeek.de)\r\n*/\r\n\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n// Material UI imports\r\nimport {\r\n    colors,\r\n    CssBaseline,\r\n    ThemeProvider,\r\n    Typography,\r\n    Container,\r\n    createTheme,\r\n    Button,\r\n    Grid,\r\n    Paper,\r\n    Icon,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogContent,\r\n    DialogActions,\r\n    TableContainer,\r\n    Table,\r\n    TableBody,\r\n    TableRow,\r\n    TableCell\r\n} from \"@material-ui/core\";\r\nimport { Pagination } from \"@material-ui/lab\";\r\n\r\n// Set the IP of your switch so it can connect in dev mode\r\nconst DEV_IP = \"http://192.168.178.46:1234\";\r\nconst getBackendURL = () => {\r\n    const DEV_MODE = process.env.NODE_ENV === \"development\";\r\n    return DEV_MODE ? DEV_IP : \"\";\r\n};\r\n\r\n// Create a light and dark material UI theme\r\nconst lightTheme = createTheme({\r\n    palette: {\r\n        type: \"light\",\r\n        primary: {\r\n            main: \"#04c7c3\",\r\n        },\r\n        secondary: {\r\n            main: \"#19857b\",\r\n        },\r\n        error: {\r\n            main: colors.red.A400,\r\n        },\r\n        background: {\r\n            default: \"#ebebeb\",\r\n        },\r\n    }\r\n});\r\n\r\nconst darkTheme = createTheme({\r\n    palette: {\r\n        type: \"dark\",\r\n        primary: {\r\n            main: \"#50f4dc\",\r\n        },\r\n        secondary: {\r\n            main: \"#19857b\",\r\n        },\r\n        error: {\r\n            main: colors.red.A400,\r\n        },\r\n        background: {\r\n            default: \"#2d2d2d\",\r\n        }\r\n    }\r\n});\r\n\r\nvar isSM = window.matchMedia(lightTheme.breakpoints.down('sm').replace(\"@media \", \"\")).matches;\r\n\r\n// Component for one gallery content\r\nclass GalleryItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            item: props.item,\r\n            isVideo: props.item.type === \"video\",\r\n            dialogOpen: false\r\n        };\r\n\r\n        this.imageClicked = this.imageClicked.bind(this);\r\n        this.dialogClose = this.dialogClose.bind(this);\r\n    }\r\n\r\n    imageClicked() {\r\n        this.setState({\r\n            dialogOpen: true\r\n        });\r\n    }\r\n\r\n    dialogClose() {\r\n        this.setState({\r\n            dialogOpen: false\r\n        });\r\n    }\r\n\r\n    getDateString() {\r\n        var date = new Date(this.state.item.takenAt * 1000);\r\n        var string = date.toLocaleDateString() + \" \" + date.toLocaleTimeString();\r\n\r\n        return string;\r\n    }\r\n\r\n    // https://stackoverflow.com/a/20732091/5028730\r\n    humanFileSize(size) {\r\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\r\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'KB', 'MB', 'GB', 'TB'][i];\r\n    };\r\n\r\n    render() {\r\n        // Decide whether to show a video or an image element\r\n        let viewElement;\r\n        let viewElementBig;\r\n        const previewURL = getBackendURL() + \"/thumbnail?id=\" + this.state.item.id;\r\n        const fullURL = getBackendURL() + \"/file?id=\" + this.state.item.id;\r\n        if (this.state.isVideo) {\r\n            viewElement = <video src={fullURL} controls preload={\"none\"} poster={previewURL}></video>\r\n            viewElementBig = <video src={fullURL} controls preload={\"none\"} className={\"gallery-content-big\"} poster={previewURL}></video>;\r\n        } else {\r\n            viewElement = <img src={previewURL} alt=\"\"></img>\r\n            viewElementBig = <a href={fullURL} target=\"_blank\" rel=\"noreferrer\"><img src={fullURL} className={\"gallery-content-big\"} alt=\"\"></img></a>;\r\n        }\r\n\r\n        return (\r\n            <Grid item xs={isSM ? 12 : 4}>\r\n                <Paper onClick={this.imageClicked} elevation={2} className={\"grid-cell\"}>\r\n                    {viewElement}\r\n                </Paper>\r\n\r\n                <Dialog fullScreen={isSM} open={this.state.dialogOpen} onClose={this.dialogClose} aria-labelledby=\"responsive-dialog-title\">\r\n                    <DialogContent>\r\n                        {viewElementBig}\r\n                        <div className={\"gallery-content-bar\"}>\r\n                            <a download={this.state.item.fileName} href={fullURL}><Button color=\"primary\"><i className={\"fas fa-download\"}></i> Download</Button></a>\r\n                        </div>\r\n                        <TableContainer>\r\n                            <Table>\r\n                                <TableBody>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Type</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.type === \"video\" ? \"Video\" : \"Screenshot\"}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Taken at</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.getDateString()}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Game</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.game}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Stored at</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.storedAt === \"sd\" ? \"SD Card\" : \"Internal Storage\"}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Size</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.humanFileSize(this.state.item.fileSize)}</TableCell>\r\n                                    </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </TableContainer>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button color=\"primary\" onClick={this.dialogClose}>Close</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\n// Component for the whole web app\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            galleryContent: [],\r\n            currentPage: 1,\r\n            maxPages: 1,\r\n            currentTheme: \"light\",\r\n            stats: {\r\n                numScreenshots: 0,\r\n                numVideos: 0,\r\n                indexTime: 0\r\n            },\r\n            error: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch the gallery directly at the beginning\r\n        this.fetchGallery();\r\n    }\r\n\r\n    fetchGallery() {\r\n        fetch(getBackendURL() + \"/gallery?page=\" + this.state.currentPage)\r\n        .then(res => res.json())\r\n        .then((result) => {\r\n            this.setState({\r\n                galleryContent: result.gallery,\r\n                maxPages: result.pages,\r\n                currentTheme: result.theme,\r\n                stats: result.stats,\r\n                error: false\r\n            })\r\n        }, (error) => {\r\n            this.setState({\r\n                error: true\r\n            });\r\n        });\r\n    }\r\n\r\n    onPageChange(e, page) {\r\n        this.setState({\r\n            currentPage: page\r\n        }, () => {\r\n            this.fetchGallery();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ThemeProvider theme={this.state.currentTheme === \"light\" ? lightTheme : darkTheme}>\r\n                <CssBaseline/>\r\n                <Container style={{flexGrow: 1, padding: \"8px\"}}>\r\n                    <Typography variant=\"h2\" color=\"textPrimary\" align=\"center\">NXGallery<a href={\"https://github.com/iUltimateLP/NXGallery\"} target={\"_blank\"} rel={\"noreferrer\"}><i className={`fab fa-github ${this.state.currentTheme}`}></i></a></Typography>\r\n                    <Typography variant=\"h6\" color=\"textSecondary\" align=\"center\" style={{paddingBottom: \"16px\", fontWeight: \"100\"}}>Indexed {this.state.stats.numScreenshots} photos and {this.state.stats.numVideos} videos in {this.state.stats.indexTime.toPrecision(3)} seconds.</Typography>\r\n\r\n                    <Grid container spacing={2} justifyContent=\"center\">\r\n                        {this.state.galleryContent.map((value) => (\r\n                            <GalleryItem key={value.takenAt} item={value}/>\r\n                        ))}\r\n                    </Grid>\r\n\r\n                    {this.state.error && \r\n                        <Typography variant=\"h6\" color=\"error\" align=\"center\">Oh no, an error has occured :(</Typography>\r\n                    }\r\n\r\n                    {(this.state.galleryContent.length === 0 && !this.state.error) &&\r\n                        <Container align=\"center\" style={{paddingTop: \"20px\"}}>\r\n                            <CircularProgress color=\"primary\"></CircularProgress>\r\n                        </Container>\r\n                    }\r\n\r\n                    {(this.state.galleryContent.length > 0 && !this.state.error) && \r\n                        <Container align=\"center\" style={{paddingTop: \"20px\", paddingBottom: \"12px\"}}>\r\n                            <Pagination count={this.state.maxPages} className={\"pagination\"} onChange={(e, page) => this.onPageChange(e, page)}/>\r\n                        </Container>\r\n                    }\r\n\r\n                    <Container align=\"center\" className={\"footer\"}>\r\n                        <Typography variant=\"overline\" color=\"textSecondary\" align=\"center\">Made with</Typography>\r\n                        <Icon className={\"heart\"}>favorite</Icon>\r\n                        <Typography variant=\"overline\" color=\"textSecondary\" align=\"center\">in Bremen, Germany</Typography><br/>\r\n                    </Container>\r\n                </Container>\r\n            </ThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nReactDOM.render(\r\n    // Render the app\r\n    <App/>,\r\n    document.querySelector(\"#app-root\")\r\n);\r\n"],"sourceRoot":""}